{% extends "layout.html" %}

{% block body %}
    {% if req.session.credentials.accessToken %}
        <!-- Let the user post -->
        <form action="/post" method="post">
            <div class="centered">
                <table>
                    <tr>
                        <td>
                            <textarea name="text" placeholder="Post something" cols="90" rows="5" style="resize: none;" maxlength="10000"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input class="on_right" type="submit">
                        </td>
                    </tr>
                </table>
            </div>
        </form>
        <hr>
    {% endif %}

    {% for post in posts %}
        <div class="post">
            <table>
                <tr>
                    <td>
                        <img class="profile_picture no_margin_top" src="{{ post.user.image_url }}" alt="Profile photo">
                    </td>
                    <td>
                        <a href="/users/{{ post.user.id }}">{{ post.user.first_name }} {{ post.user.last_name }}</a>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>{{ post.text }}</td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <a href="/post/{{ post.id }}">
                            <img class="post_icon" alt="Comments" src="/public/comment_icon.jpg">
                        </a>
                        <a>
                            <img src="/public/like_icon.jpg" alt="like_icon">
                        </a>
                    </td>
                </tr>
            </table>
        </div>
        <br>
    {% endfor %}
{% endblock %}